Drone mosaic correction
========================

``homonim`` can be used to correct any orthorectified multi-spectral imagery.  This case study demonstrates the correction of a drone ortho-mosaic.

Correction
----------

A 5 cm resolution, RGB ortho-mosaic was obtained from `Open Aerial Map <https://openaerialmap.org/>`_.  The image covers a complex, heterogeneous area, making it a challenging example.  Correction was performed with a Sentinel-2 reference, the :attr:`~homonim.enums.Model.gain_blk_offset` model, and a kernel shape of 3 x 3 pixels.  Of the tested settings, these produced the best evaluation results.

.. figure:: drone_mosaic-src_ref_corr.jpg
    :width: 80%
    :align: center

    **Source, reference & corrected images**

Improvement in surface reflectance is less obvious in this figure, than e.g. the :ref:`aerial mosaic case study <source-mosaic>`, as seamlines and other variations in the source image have been smoothed out by the drone processing software.  Nevertheless, there is a good match between the corrected and reference image colour.

There is a good colour correspondence between the corrected and reference images.  While seamlines and other variations in the source mosaic have been removed by the drone processing software, this does not necessarily imply surface reflectance accuracy.  The evaluation in the next section quantifies the surface reflectance differences between source and corrected images.

Evaluation
----------

The source and corrected drone images were compared with a second, Landsat-8 reference to better evaluate surface reflectance accuracy.  The scatter plots below show a good improvement in correlation with the reference after correction.

.. figure:: drone_mosaic-eval.png
    :align: center

    **Source & corrected - reference comparison**

.. note::
    The figures in this case study are generated by the `drone correction tutorial <../tutorials/drone_correction.ipynb>`_.

    The `ortho-image <https://oin-hotosm.s3.amazonaws.com/6202ec307b3a500007430480/0/6202ec307b3a500007430481.tif>`_ was obtained from `Open Aerial Map <https://openaerialmap.org/>`_  under the `CC BY 4.0 <https://creativecommons.org/licenses/by/4.0/>`_ license.
